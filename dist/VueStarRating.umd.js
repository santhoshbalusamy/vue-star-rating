(function(e,n){typeof exports=="object"&&typeof module<"u"?module.exports=n(require("vue")):typeof define=="function"&&define.amd?define(["vue"],n):(e=typeof globalThis<"u"?globalThis:e||self,e.VueStarRating=n(e.Vue))})(this,function(e){"use strict";class n{constructor(r){this.color=r}parseAlphaColor(){return/^rgba\((\d{1,3}%?\s*,\s*){3}(\d*(?:\.\d+)?)\)$/.test(this.color)?this.parseRgba():/^hsla\(\d+\s*,\s*([\d.]+%\s*,\s*){2}(\d*(?:\.\d+)?)\)$/.test(this.color)?this.parseHsla():/^#([0-9A-Fa-f]{4}|[0-9A-Fa-f]{8})$/.test(this.color)?this.parseAlphaHex():/^transparent$/.test(this.color)?this.parseTransparent():{color:this.color,opacity:"1"}}parseRgba(){return{color:this.color.replace(/,(?!.*,).*(?=\))|a/g,""),opacity:this.color.match(/\.\d+|[01](?=\))/)[0]}}parseHsla(){return{color:this.color.replace(/,(?!.*,).*(?=\))|a/g,""),opacity:this.color.match(/\.\d+|[01](?=\))/)[0]}}parseAlphaHex(){return{color:this.color.length===5?this.color.substring(0,4):this.color.substring(0,7),opacity:this.color.length===5?(parseInt(this.color.substring(4,5)+this.color.substring(4,5),16)/255).toFixed(2):(parseInt(this.color.substring(7,9),16)/255).toFixed(2)}}parseTransparent(){return{color:"#fff",opacity:0}}}const z="",d=(t,r)=>{const i=t.__vccOpts||t;for(const[s,l]of r)i[s]=l;return i},u=e.defineComponent({name:"Star",props:{fill:{type:Number,default:0},points:{type:Array,default(){return[]}},size:{type:Number,default:50},starId:{type:Number,required:!0},activeColor:{type:String,required:!0},inactiveColor:{type:String,required:!0},borderColor:{type:String,default:"#000"},activeBorderColor:{type:String,default:"#000"},borderWidth:{type:Number,default:0},roundedCorners:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},glow:{type:Number,default:0},glowColor:{type:String,default:null,required:!1},animate:{type:Boolean,default:!1}},emits:["star-mouse-move","star-selected"],data(){return{starPoints:[19.8,2.2,6.6,43.56,39.6,17.16,0,17.16,33,43.56],grad:"",glowId:"",isStarActive:!0}},computed:{starPointsToString(){return this.starPoints.join(",")},gradId(){return"url(#"+this.grad+")"},starSize(){const t=this.roundedCorners&&this.borderWidth<=0?parseInt(this.size)-parseInt(this.border):this.size;return parseInt(t)+parseInt(this.border)},starFill(){return this.rtl?100-this.fill+"%":this.fill+"%"},border(){return this.roundedCorners&&this.borderWidth<=0?6:this.borderWidth},getBorderColor(){return this.roundedCorners&&this.borderWidth<=0?this.fill<=0?this.inactiveColor:this.activeColor:this.fill<=0?this.borderColor:this.activeBorderColor},maxSize(){return this.starPoints.reduce(function(t,r){return Math.max(t,r)})},viewBox(){return"0 0 "+this.maxSize+" "+this.maxSize},shouldAnimate(){return this.animate&&this.isStarActive},strokeLinejoin(){return this.roundedCorners?"round":"miter"}},created(){this.starPoints=this.points.length?this.points:this.starPoints,this.calculatePoints(),this.grad=this.getRandomId(),this.glowId=this.getRandomId()},methods:{mouseMoving(t){t.touchAction!=="undefined"&&this.$emit("star-mouse-move",{event:t,position:this.getPosition(t),id:this.starId})},touchStart(){this.$nextTick(()=>{this.isStarActive=!0})},touchEnd(){this.$nextTick(()=>{this.isStarActive=!1})},getPosition(t){let r=.92*this.size;const i=this.rtl?Math.min(t.offsetX,45):Math.max(t.offsetX,1);let s=Math.round(100/r*i);return Math.min(s,100)},selected(t){this.$emit("star-selected",{id:this.starId,position:this.getPosition(t)})},getRandomId(){return Math.random().toString(36).substring(7)},calculatePoints(){this.starPoints=this.starPoints.map((t,r)=>{const i=r%2===0?this.border*1.5:0;return this.size/this.maxSize*t+i})},getColor(t){return new n(t).parseAlphaColor().color},getOpacity(t){return new n(t).parseAlphaColor().opacity}}}),c=t=>(e.pushScopeId("data-v-c0f9103d"),t=t(),e.popScopeId(),t),g=["height","width","viewBox"],p=["id"],f=["offset","stop-color","stop-opacity"],m=["offset","stop-color","stop-opacity"],y=["id"],C=["stdDeviation"],R=c(()=>e.createElementVNode("feMerge",null,[e.createElementVNode("feMergeNode",{in:"coloredBlur"}),e.createElementVNode("feMergeNode",{in:"SourceGraphic"})],-1)),S=["points","fill","stroke","filter","stroke-width"],v=["points","fill","stroke","stroke-width","stroke-linejoin"],b=["points","fill"];function B(t,r,i,s,l,I){return e.openBlock(),e.createElementBlock("svg",{class:e.normalizeClass(["vue-star-rating-star",{"vue-star-rating-star-rotate":t.shouldAnimate}]),height:t.starSize,width:t.starSize,viewBox:t.viewBox,onMousemove:r[0]||(r[0]=(...o)=>t.mouseMoving&&t.mouseMoving(...o)),onClick:r[1]||(r[1]=(...o)=>t.selected&&t.selected(...o)),onTouchstart:r[2]||(r[2]=(...o)=>t.touchStart&&t.touchStart(...o)),onTouchend:r[3]||(r[3]=(...o)=>t.touchEnd&&t.touchEnd(...o))},[e.createElementVNode("linearGradient",{id:t.grad,x1:"0",x2:"100%",y1:"0",y2:"0"},[e.createElementVNode("stop",{offset:t.starFill,"stop-color":t.rtl?t.getColor(t.inactiveColor):t.getColor(t.activeColor),"stop-opacity":t.rtl?t.getOpacity(t.inactiveColor):t.getOpacity(t.activeColor)},null,8,f),e.createElementVNode("stop",{offset:t.starFill,"stop-color":t.rtl?t.getColor(t.activeColor):t.getColor(t.inactiveColor),"stop-opacity":t.rtl?t.getOpacity(t.activeColor):t.getOpacity(t.inactiveColor)},null,8,m)],8,p),e.createElementVNode("filter",{id:t.glowId,height:"130%",width:"130%",filterUnits:"userSpaceOnUse"},[e.createElementVNode("feGaussianBlur",{stdDeviation:t.glow,result:"coloredBlur"},null,8,C),R],8,y),e.withDirectives(e.createElementVNode("polygon",{points:t.starPointsToString,fill:t.gradId,stroke:t.glowColor,filter:"url(#"+t.glowId+")","stroke-width":t.border},null,8,S),[[e.vShow,t.glowColor&&t.glow>0&&t.fill>0]]),e.createElementVNode("polygon",{points:t.starPointsToString,fill:t.gradId,stroke:t.getBorderColor,"stroke-width":t.border,"stroke-linejoin":t.strokeLinejoin},null,8,v),e.createElementVNode("polygon",{points:t.starPointsToString,fill:t.gradId},null,8,b)],42,g)}const w=d(u,[["render",B],["__scopeId","data-v-c0f9103d"]]),E="",k=e.defineComponent({name:"VueStarRating",components:{Star:w},props:{increment:{type:Number,default:1},rating:{type:Number,default:0},roundStartRating:{type:Boolean,default:!0},activeColor:{type:[String,Array],default:"#ffd055"},inactiveColor:{type:String,default:"#d8d8d8"},maxRating:{type:Number,default:5},starPoints:{type:Array,default(){return[]}},starSize:{type:Number,default:50},showRating:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},textClass:{type:String,default:""},inline:{type:Boolean,default:!1},borderColor:{type:String,default:"#999"},activeBorderColor:{type:[String,Array],default:null},borderWidth:{type:Number,default:0},roundedCorners:{type:Boolean,default:!1},padding:{type:Number,default:0},rtl:{type:Boolean,default:!1},fixedPoints:{type:Number,default:null},glow:{type:Number,default:0},glowColor:{type:String,default:"#fff"},clearable:{type:Boolean,default:!1},activeOnClick:{type:Boolean,default:!1},animate:{type:Boolean,default:!1}},emits:["update:rating","hover:rating"],data(){return{step:0,fillLevel:[],currentRating:0,selectedRating:0,ratingSelected:!1}},computed:{formattedRating(){return this.fixedPoints===null?this.currentRating:this.currentRating.toFixed(this.fixedPoints)},shouldRound(){return this.ratingSelected||this.roundStartRating},margin(){return this.padding+this.borderWidth},activeColors(){return Array.isArray(this.activeColor)?this.padColors(this.activeColor,this.maxRating,this.activeColor.slice(-1)[0]):new Array(this.maxRating).fill(this.activeColor)},currentActiveColor(){return this.activeOnClick?this.selectedRating>0?this.activeColors[Math.ceil(this.selectedRating)-1]:this.inactiveColor:this.currentRating>0?this.activeColors[Math.ceil(this.currentRating)-1]:this.inactiveColor},activeBorderColors(){if(Array.isArray(this.activeBorderColor))return this.padColors(this.activeBorderColor,this.maxRating,this.activeBorderColor.slice(-1)[0]);let t=this.activeBorderColor?this.activeBorderColor:this.borderColor;return new Array(this.maxRating).fill(t)},currentActiveBorderColor(){return this.activeOnClick?this.selectedRating>0?this.activeBorderColors[Math.ceil(this.selectedRating)-1]:this.borderColor:this.currentRating>0?this.activeBorderColors[Math.ceil(this.currentRating)-1]:this.borderColor},roundedRating(){let t=1/this.increment;return Math.min(this.maxRating,Math.ceil(this.currentRating*t)/t)}},watch:{rating(t){this.currentRating=t,this.selectedRating=t,this.createStars(this.shouldRound)}},created(){this.step=this.increment*100,this.currentRating=this.rating,this.selectedRating=this.currentRating,this.createStars(this.roundStartRating)},methods:{setRating(t,r){if(!this.readOnly){const i=this.rtl?(100-t.position)/100:t.position/100;this.currentRating=(t.id+i-1).toFixed(2),this.currentRating=this.currentRating>this.maxRating?this.maxRating:this.currentRating,r?(this.createStars(!0,!0),this.selectedRating=this.clearable&&this.currentRating===this.selectedRating?0:this.currentRating,this.$emit("update:rating",this.selectedRating),this.ratingSelected=!0):(this.createStars(!0,!this.activeOnClick),this.$emit("hover:rating",this.currentRating))}},resetRating(){this.readOnly||(this.currentRating=this.selectedRating,this.createStars(this.shouldRound))},createStars(t=!0,r=!0){this.currentRating=t?this.roundedRating:this.currentRating;for(let i=0;i<this.maxRating;i++){let s=0;i<this.currentRating&&(s=this.currentRating-i>1?100:(this.currentRating-i)*100),r&&(this.fillLevel[i]=Math.round(s))}},padColors(t,r,i){return Object.assign(new Array(r).fill(i),t)}}}),N={class:"sr-only"};function A(t,r,i,s,l,I){const o=e.resolveComponent("star");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vue-star-rating",{"vue-star-rating-rtl":t.rtl},{"vue-star-rating-inline":t.inline}])},[e.createElementVNode("div",N,[e.renderSlot(t.$slots,"screen-reader",{rating:t.selectedRating,stars:t.maxRating},()=>[e.createElementVNode("span",null,"Rated "+e.toDisplayString(t.selectedRating)+" stars out of "+e.toDisplayString(t.maxRating),1)],!0)]),e.createElementVNode("div",{class:"vue-star-rating",onMouseleave:r[1]||(r[1]=(...a)=>t.resetRating&&t.resetRating(...a))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.maxRating,a=>(e.openBlock(),e.createElementBlock("span",{key:a,class:e.normalizeClass([{"vue-star-rating-pointer":!t.readOnly},"vue-star-rating-star"]),style:e.normalizeStyle({"margin-right":t.margin+"px"})},[e.createVNode(o,{fill:t.fillLevel[a-1],size:t.starSize,points:t.starPoints,"star-id":a,step:t.step,"active-color":t.currentActiveColor,"inactive-color":t.inactiveColor,"border-color":t.borderColor,"active-border-color":t.currentActiveBorderColor,"border-width":t.borderWidth,"rounded-corners":t.roundedCorners,rtl:t.rtl,glow:t.glow,"glow-color":t.glowColor,animate:t.animate,onStarSelected:r[0]||(r[0]=M=>t.setRating(M,!0)),onStarMouseMove:t.setRating},null,8,["fill","size","points","star-id","step","active-color","inactive-color","border-color","active-border-color","border-width","rounded-corners","rtl","glow","glow-color","animate","onStarMouseMove"])],6))),128)),t.showRating?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(["vue-star-rating-rating-text",t.textClass])},e.toDisplayString(t.formattedRating),3)):e.createCommentVNode("",!0)],32)],2)}const h=d(k,[["render",A],["__scopeId","data-v-3d12d48e"]]);return{install(t){t.component(h.name,h)}}});
